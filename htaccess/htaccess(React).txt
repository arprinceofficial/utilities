# Enable Rewrite Engine
RewriteEngine On

# Redirect all HTTP traffic to HTTPS
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Ensure requests are for the correct domain (no "www" or other subdomains)
RewriteCond %{HTTP_HOST} !^trustsurfsolution\.com$ [NC]
RewriteRule ^ https://trustsurfsolution.com%{REQUEST_URI} [L,R=301]

# Proxy all requests to your React app running on PM2 (port 37639)
RewriteRule ^(.*)$ http://127.0.0.1:3000/$1 [P,L]

# PHP handler configuration (auto-generated by cPanel)
<IfModule mime_module>
  AddHandler application/x-httpd-ea-php81 .php .php8 .phtml
</IfModule>
